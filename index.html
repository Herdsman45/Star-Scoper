<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta
      http-equiv="Content-Security-Policy"
      content="default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline'; img-src 'self' data:;"
    />
    <title>Star Scoper</title>
    <link rel="stylesheet" href="styles.css" />
    <link rel="stylesheet" href="styles-selection.css" />
    <link rel="stylesheet" href="debug-toggle.css" />
    <link rel="stylesheet" href="star-call-styles.css" />
    <link rel="stylesheet" href="dark-theme.css" />
    <link rel="stylesheet" href="keybind-styles.css" />
  </head>
  <body>
    <!-- Theme toggle and Widget button -->
    <div
      class="theme-toggle"
      style="display: flex; align-items: center; gap: 16px"
    >
      <label class="toggle-switch-label" style="margin-bottom: 0">
        <span class="switch">
          <input type="checkbox" id="dark-mode-toggle" />
          <span class="slider"></span>
        </span>
        Dark Mode
      </label>
      <button
        id="open-widget-btn"
        class="widget-button"
        style="
          padding: 8px 16px;
          background: var(--button-bg, #444);
          color: var(--button-text, #fff);
          border: none;
          border-radius: 6px;
          cursor: pointer;
          font-size: 1em;
          transition: background 0.2s;
        "
      >
        Open Widget
      </button>
    </div>

    <div class="container">
      <h1>Star Scoper</h1>

      <div class="section">
        <h2>Quick Capture</h2>
        <div class="slots">
          <div class="slot">
            <h3>Slot 1</h3>
            <button id="set-slot1">Set Regions</button>
            <button id="capture-slot1">Capture</button>
            <div class="status" id="status-slot1"></div>
          </div>

          <div class="slot">
            <h3>Slot 2</h3>
            <button id="set-slot2">Set Regions</button>
            <button id="capture-slot2">Capture</button>
            <div class="status" id="status-slot2"></div>
          </div>
        </div>
      </div>

      <div class="section">
        <h2>Result</h2>
        <div class="result-container">
          <div class="result-column">
            <h3>Raw Text</h3>
            <div class="result-box" id="raw-text"></div>
            <button id="copy-raw">Copy Raw</button>
          </div>

          <div class="result-column">
            <h3>Star Call Format</h3>
            <div class="result-box" id="processed-text"></div>
            <button id="copy-processed">Copy Star Call</button>
          </div>
        </div>

        <div
          class="debug-controls"
          style="display: flex; align-items: center; gap: 16px; flex-wrap: wrap"
        >
          <div class="toggle-switch">
            <label class="toggle-switch-label">
              <span class="switch">
                <input type="checkbox" id="debug-mode" />
                <span class="slider"></span>
              </span>
              Enable Debug Mode
            </label>
          </div>
          <button
            id="open-debug-btn"
            class="btn debug-btn"
            style="
              background-color: #ff5722;
              color: white;
              font-weight: bold;
              padding: 10px 20px;
              border: none;
              border-radius: 4px;
              cursor: pointer;
              box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            "
          >
            üîç Open Debug Images
          </button>
          <div
            class="debug-status"
            id="debug-status"
            style="flex-basis: 100%; margin-top: 8px"
          >
            Debug mode is disabled - no debug images will be saved
          </div>
        </div>
        <div id="recent-debug-images" class="recent-debug-images"></div>
      </div>

      <div class="section">
        <h2>Settings</h2>
        <div class="settings-grid">
          <div class="setting">
            <label for="hotkey-slot1">Slot 1 Keybind:</label>
            <button id="hotkey-slot1" class="keybind-button">
              Click to set
            </button>
          </div>

          <div class="setting">
            <label for="hotkey-slot2">Slot 2 Keybind:</label>
            <button id="hotkey-slot2" class="keybind-button">
              Click to set
            </button>
          </div>

          <div
            class="setting"
            style="
              grid-column: 1 / -1;
              flex-direction: column;
              align-items: flex-start;
            "
          >
            <label class="toggle-switch-label">
              <span class="switch">
                <input type="checkbox" id="ahk-integration" />
                <span class="slider"></span>
              </span>
              AHK Integration
            </label>
            <div class="setting-description">
              Write Discord calls to file for AutoHotkey automation
            </div>
          </div>
        </div>

        <p class="info-text">
          All settings are automatically saved when changed
        </p>
      </div>
    </div>

    <!-- Region selection overlay (hidden by default) -->
    <div id="region-selection-overlay" class="hidden">
      <div class="instructions">
        <h2>
          Select Regions for Slot <span id="selection-slot-number"></span>
        </h2>
        <p>Drag to move, resize using the handles at the corners</p>
      </div>
      <div class="selection-controls">
        <button id="save-regions" class="button-save">Save Regions</button>
        <button id="cancel-selection" class="button-cancel">Cancel</button>
      </div>
    </div>

    <script src="renderer.js"></script>
    <script src="widget-controller.js"></script>
  </body>
</html>
